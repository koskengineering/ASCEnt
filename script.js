const _0x18bf7e=_0x356d;(function(_0x5b1ecd,_0x49be3c){const _0x458cab=_0x356d,_0x46f109=_0x5b1ecd();while(!![]){try{const _0x6cb565=-parseInt(_0x458cab(0x8c))/0x1+-parseInt(_0x458cab(0xa4))/0x2*(-parseInt(_0x458cab(0xe5))/0x3)+parseInt(_0x458cab(0xbf))/0x4+parseInt(_0x458cab(0xbc))/0x5+-parseInt(_0x458cab(0xeb))/0x6+-parseInt(_0x458cab(0xa6))/0x7*(-parseInt(_0x458cab(0xaa))/0x8)+-parseInt(_0x458cab(0x97))/0x9*(parseInt(_0x458cab(0xec))/0xa);if(_0x6cb565===_0x49be3c)break;else _0x46f109['push'](_0x46f109['shift']());}catch(_0x15b3d2){_0x46f109['push'](_0x46f109['shift']());}}}(_0x4e61,0x9a5bd));const CONFIG={'chartJs':_0x18bf7e(0xd6),'ids':{'graphContainer':_0x18bf7e(0xbe),'chart':_0x18bf7e(0x8f),'adContainer':'amzn-ad-container'},'article':{'title':'Amazon注文履歴自動取得ツール','thumbnail':_0x18bf7e(0x93),'url':_0x18bf7e(0xca)}};function addContainerStyles(){const _0x2d48e1=_0x18bf7e,_0x3be27a=document[_0x2d48e1(0xcd)]('style');_0x3be27a[_0x2d48e1(0xab)]=_0x2d48e1(0x9e)+CONFIG[_0x2d48e1(0x9a)][_0x2d48e1(0xd8)]+_0x2d48e1(0x99)+CONFIG['ids'][_0x2d48e1(0xdd)]+_0x2d48e1(0xde)+CONFIG['ids']['adContainer']+_0x2d48e1(0xa2)+CONFIG[_0x2d48e1(0x9a)][_0x2d48e1(0xcf)]+_0x2d48e1(0xc2)+CONFIG[_0x2d48e1(0x9a)][_0x2d48e1(0xcf)]+_0x2d48e1(0xdc)+CONFIG[_0x2d48e1(0x9a)]['adContainer']+_0x2d48e1(0xa7)+CONFIG[_0x2d48e1(0x9a)][_0x2d48e1(0xcf)]+_0x2d48e1(0xb8)+CONFIG['ids']['adContainer']+'\x20.ad-thumbnail\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20120px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x2080px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#'+CONFIG['ids'][_0x2d48e1(0xcf)]+'\x20.ad-title\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20font-size:\x2013px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20line-height:\x2019px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20flex:\x201;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20',document[_0x2d48e1(0xcb)][_0x2d48e1(0xc7)](_0x3be27a);}function createAdContainer(){const _0x37b8fc=_0x18bf7e,_0x316937=document[_0x37b8fc(0xcd)](_0x37b8fc(0xd4));_0x316937['id']=CONFIG[_0x37b8fc(0x9a)][_0x37b8fc(0xcf)];const _0x1c7c97=document[_0x37b8fc(0xcd)]('a');_0x1c7c97[_0x37b8fc(0x9b)]=CONFIG[_0x37b8fc(0xaf)][_0x37b8fc(0xc9)],_0x1c7c97[_0x37b8fc(0xa9)]=_0x37b8fc(0x8e),_0x1c7c97[_0x37b8fc(0xb3)]='_blank',_0x1c7c97['rel']=_0x37b8fc(0x8b);const _0x35787e=document[_0x37b8fc(0xcd)](_0x37b8fc(0xa5));_0x35787e[_0x37b8fc(0x96)]=CONFIG[_0x37b8fc(0xaf)][_0x37b8fc(0xd1)],_0x35787e['alt']=CONFIG[_0x37b8fc(0xaf)][_0x37b8fc(0x8a)],_0x35787e[_0x37b8fc(0xa9)]='ad-thumbnail';const _0x3dfd24=document[_0x37b8fc(0xcd)](_0x37b8fc(0xe1));return _0x3dfd24['textContent']=CONFIG[_0x37b8fc(0xaf)][_0x37b8fc(0x8a)],_0x3dfd24['className']=_0x37b8fc(0xd7),_0x1c7c97[_0x37b8fc(0xc7)](_0x35787e),_0x1c7c97[_0x37b8fc(0xc7)](_0x3dfd24),_0x316937[_0x37b8fc(0xc7)](_0x1c7c97),_0x316937;}function showBarChart(){const _0x4e6d55=_0x18bf7e,{labels:_0xeb67f1,datasets:_0x496992}=createChartDataset(),_0x3fcbd8=createGraphContainer();console['log'](_0xeb67f1,_0x496992),appendGraphContainerToDOM(_0x3fcbd8),renderChart(_0x3fcbd8[_0x4e6d55(0x98)]('#'+CONFIG['ids'][_0x4e6d55(0xdd)]),_0xeb67f1,_0x496992);}function initializeScript(){const _0x264cbe=_0x18bf7e;try{if(window[_0x264cbe(0xe9)]['hostname']!==_0x264cbe(0xb7))throw new Error(_0x264cbe(0xc4));if(document['getElementById'](CONFIG[_0x264cbe(0x9a)][_0x264cbe(0xd8)]))throw new Error('グラフはすでに表示されています。再読み込みしてから再度実行してください。');loadChartJsLibrary();}catch(_0x3843db){alert(_0x3843db[_0x264cbe(0xd2)]);}}async function loadChartJsLibrary(){const _0x1af049=_0x18bf7e;try{await loadScript(CONFIG['chartJs']),await clickAndScroll();}catch(_0x4cd2da){alert('Chart.jsの読み込みに失敗しました:\x20'+_0x4cd2da[_0x1af049(0xd2)]);}}function loadScript(_0x3ad4d1){return new Promise((_0x2c1b61,_0x264e2e)=>{const _0x1fe2fc=_0x356d,_0x586f4c=document[_0x1fe2fc(0xcd)](_0x1fe2fc(0xc6));_0x586f4c[_0x1fe2fc(0x96)]=_0x3ad4d1,_0x586f4c[_0x1fe2fc(0x9d)]=_0x2c1b61,_0x586f4c[_0x1fe2fc(0xb1)]=()=>_0x264e2e(new Error(_0x1fe2fc(0xe3)+_0x3ad4d1)),document[_0x1fe2fc(0xcb)][_0x1fe2fc(0xc7)](_0x586f4c);});}function createChartDataset(){const _0x407718=_0x18bf7e,_0x2cffd0=getAllSellersInfo(),_0x1c003d=Array[_0x407718(0xe0)](new Set(_0x2cffd0[_0x407718(0xd5)](_0x135721=>_0x135721[0x1])))['sort']((_0x1ae0c9,_0x334cd2)=>_0x1ae0c9-_0x334cd2),_0x49b0c6=filterSellersByCondition(_0x2cffd0,'新品'),_0x4ea319=filterSellersByCondition(_0x2cffd0,_0x407718(0xb5)),_0x4831e2=filterSellersByCondition(_0x2cffd0,_0x407718(0xe8)),_0x304538=filterSellersByCondition(_0x2cffd0,_0x407718(0x89)),_0x20c735=filterSellersByCondition(_0x2cffd0,'中古商品\x20-\x20可');return{'labels':_0x1c003d[_0x407718(0xd5)](_0x2af84a=>String(_0x2af84a)),'datasets':[{'label':'新品','data':mapPricesToLabels(_0x1c003d,sumByIndex(_0x49b0c6)),'backgroundColor':_0x407718(0x90)},{'label':'非常に良い','data':mapPricesToLabels(_0x1c003d,sumByIndex(_0x4ea319)),'backgroundColor':_0x407718(0xa1)},{'label':_0x407718(0xa8),'data':mapPricesToLabels(_0x1c003d,sumByIndex(_0x4831e2)),'backgroundColor':_0x407718(0xd0)},{'label':'良い','data':mapPricesToLabels(_0x1c003d,sumByIndex(_0x304538)),'backgroundColor':_0x407718(0xc0)},{'label':'可','data':mapPricesToLabels(_0x1c003d,sumByIndex(_0x20c735)),'backgroundColor':_0x407718(0x95)}]};}function mapPricesToLabels(_0x4aa674,_0x3f5e1d){const _0x3a5c68=_0x18bf7e,_0x350fcc=Object[_0x3a5c68(0x9c)](_0x3f5e1d);return _0x4aa674[_0x3a5c68(0xd5)](_0x335c3b=>_0x350fcc[_0x335c3b]||0x0);}function getAllSellersInfo(){const _0x1991ea=_0x18bf7e,_0x254f29=[],_0x1b9c07=[document[_0x1991ea(0x98)]('#aod-pinned-offer'),...Array['from'](document['querySelectorAll'](_0x1991ea(0xea)))];for(const _0x2a331b of _0x1b9c07){const _0x3d0841=getStockAndPrice(_0x2a331b);if(_0x3d0841)_0x254f29[_0x1991ea(0xc5)](_0x3d0841);}return _0x254f29;}function filterNewSellers(_0x1cdb63){const _0x178547=_0x18bf7e;return _0x1cdb63[_0x178547(0xa3)](_0xad0b13=>_0xad0b13[0x0]==='新品')[_0x178547(0xd5)](_0x82d707=>[_0x82d707[0x1],_0x82d707[0x2]]);}function filterSellersByCondition(_0x360de6,_0xdb20a8){const _0x4ce9e1=_0x18bf7e;return _0x360de6['filter'](_0x1ab92d=>_0x1ab92d[0x0]===_0xdb20a8)[_0x4ce9e1(0xd5)](_0xde6396=>[_0xde6396[0x1],_0xde6396[0x2]]);}function sumByIndex(_0x54596d){const _0x2486f6=_0x18bf7e,_0x55e3bd={};return _0x54596d['forEach'](([_0x581b40,_0x4bad63])=>{_0x55e3bd[_0x581b40]=(_0x55e3bd[_0x581b40]||0x0)+parseInt(_0x4bad63);}),Object[_0x2486f6(0x92)](_0x55e3bd);}function _0x4e61(){const _0x4ed4d1=['innerText','article','observe','onerror','#buybox-see-all-buying-choices\x20a','target','log','中古商品\x20-\x20非常に良い','scrollTop','www.amazon.co.jp','\x20.ad-link:hover\x20.ad-title\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20underline;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','Reached\x20the\x20bottom\x20of\x20the\x20scrollable\x20div.','#dynamic-aod-ingress-box,\x20#unqualifiedBuyBox','bar','5821585wpMoMo','[id*=\x22aod-offer-qty-component-\x22]','amzn-graph-container','2455672XTTAzG','#f3e20e','height','::before\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20content:\x20\x27\x27;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x200;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20left:\x20-10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x20-10px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20height:\x201px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','[data-action=\x22show-all-offers-display\x22]','このブックマークレットはAmazon.co.jpでのみ使用できます。','push','script','appendChild','スクロール中にエラーが発生しました。','url','https://note.com/kosk_sdr/n/n071896d9278d','head','[data-action=\x22close-all-offers-display\x22]','createElement','replace','adContainer','#4dc0b5','thumbnail','message','Error\x20during\x20scrolling:','div','map','https://cdn.jsdelivr.net/npm/chart.js','ad-title','graphContainer','canvas','type','length','\x20.ad-link\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#0066c0;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20align-items:\x20flex-start;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','chart','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20margin-bottom:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','getContext','from','span','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20top:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20','Failed\x20to\x20load\x20','[data-action=\x22aod-close-on-esc-action\x22]','1233921EkGpPO','scrollHeight','Error\x20in\x20getStockAndPrice:','中古商品\x20-\x20ほぼ新品','location','#aod-offer','6461568kqvWhJ','15909310VKkNNK','.a-declarative','中古商品\x20-\x20良い','title','noopener\x20noreferrer','684482nfAbuQ','getElementById','ad-link','amzn-chart','#de7921','.a-price\x20.a-price-whole','entries','https://raw.githubusercontent.com/koskengineering/ASCFree/refs/heads/main/eyecatch.png','after','#f08080','src','9JDMIBJ','querySelector','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20background-color:\x20white;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#d5d9d9;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20width:\x20280px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','ids','href','fromEntries','onload','\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','click','top','#5fba7d','\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20position:\x20relative;\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20padding-top:\x2015px;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','filter','6dqEaFU','img','115374ZkwzQJ','\x20.ad-link:hover\x20{\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20color:\x20#c45500;\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#','ほぼ新品','className','472xOpbrF','innerHTML','childList','出品者が1人以下のためグラフ描画を中止します。'];_0x4e61=function(){return _0x4ed4d1;};return _0x4e61();}function _0x356d(_0x80b1f2,_0x13d166){const _0x4e61a5=_0x4e61();return _0x356d=function(_0x356d56,_0x7ea93){_0x356d56=_0x356d56-0x88;let _0x30ef4b=_0x4e61a5[_0x356d56];return _0x30ef4b;},_0x356d(_0x80b1f2,_0x13d166);}function createGraphContainer(){const _0x4c663b=_0x18bf7e,_0x58a5a0=document[_0x4c663b(0xcd)](_0x4c663b(0xd4));_0x58a5a0['id']=CONFIG['ids']['graphContainer'];const _0x46ddd8=createCanvas();_0x58a5a0[_0x4c663b(0xc7)](_0x46ddd8);const _0x1119d3=document['createElement']('hr');return _0x58a5a0[_0x4c663b(0xc7)](_0x1119d3),addContainerStyles(),_0x58a5a0;}function addContainerStyles(){const _0x4f3427=_0x18bf7e,_0x55a9f4=document['createElement']('style');_0x55a9f4['innerHTML']=_0x4f3427(0x9e)+CONFIG[_0x4f3427(0x9a)]['graphContainer']+_0x4f3427(0xe2),document[_0x4f3427(0xcb)][_0x4f3427(0xc7)](_0x55a9f4);}function createCanvas(){const _0x431c00=_0x18bf7e,_0x4f5142=document['createElement'](_0x431c00(0xd9));return _0x4f5142['id']=CONFIG[_0x431c00(0x9a)][_0x431c00(0xdd)],_0x4f5142['width']=0x118,_0x4f5142[_0x431c00(0xc1)]=0x190,_0x4f5142;}function appendGraphContainerToDOM(_0x3efd7c){const _0x56106b=_0x18bf7e,_0x50aa9e=document[_0x56106b(0x98)](_0x56106b(0xba));_0x50aa9e[_0x56106b(0x94)](_0x3efd7c);}function renderChart(_0x3a8edc,_0x409087,_0x5eac08){const _0x873266=_0x18bf7e,_0x39a953=_0x3a8edc[_0x873266(0xdf)]('2d');new Chart(_0x39a953,{'type':_0x873266(0xbb),'data':{'labels':_0x409087,'datasets':_0x5eac08},'options':{'indexAxis':'y','scales':{'x':{'stacked':!![],'min':0x0},'y':{'stacked':!![],'reverse':!![]}},'responsive':!![],'plugins':{'legend':{'position':_0x873266(0xa0)}}}});}async function scrollDivToBottom(){const _0x539980=_0x18bf7e,_0x47ea6a=document[_0x539980(0x8d)]('all-offers-display-scroller');if(!_0x47ea6a){showBarChart();const _0x11915a=document[_0x539980(0x98)]('[data-action=\x22close-all-offers-display\x22]');if(_0x11915a)_0x11915a[_0x539980(0x9f)]();return;}try{let _0x2363b6=_0x47ea6a[_0x539980(0xb6)],_0x334b77=0x0;const _0x1b5cf4=0xa;while(_0x334b77<_0x1b5cf4){_0x47ea6a[_0x539980(0xb6)]=_0x47ea6a[_0x539980(0xe6)],await new Promise(_0x3fc71c=>setTimeout(_0x3fc71c,0x3e8));if(_0x47ea6a[_0x539980(0xb6)]===_0x2363b6){console['log'](_0x539980(0xb9));break;}_0x2363b6=_0x47ea6a['scrollTop'],_0x334b77++;}showBarChart();}catch(_0x9aaad1){console['error'](_0x539980(0xd3),_0x9aaad1),alert(_0x539980(0xc8));}finally{const _0x1b594d=document[_0x539980(0x98)](_0x539980(0xcc));if(_0x1b594d)_0x1b594d[_0x539980(0x9f)]();}}function clickAndScroll(){const _0x469691=_0x18bf7e,_0x5812e4=document[_0x469691(0x98)](_0x469691(0xc3));if(!_0x5812e4){alert(_0x469691(0xad));return;}else{const _0x5041e8=_0x5812e4['querySelector'](_0x469691(0xb2));console[_0x469691(0xb4)](_0x5041e8),!_0x5041e8?_0x5812e4['click']():_0x5041e8['click']();}const _0xec5ba0=new MutationObserver((_0x25d413,_0x1f8124)=>{const _0x4ecbe1=_0x469691;for(let _0x4d64e3 of _0x25d413){if(_0x4d64e3[_0x4ecbe1(0xda)]===_0x4ecbe1(0xac)){const _0x239e65=document['querySelector'](_0x4ecbe1(0xe4));if(_0x239e65){scrollDivToBottom(),_0x1f8124['disconnect']();break;}}}});_0xec5ba0[_0x469691(0xb0)](document['body'],{'childList':!![],'subtree':!![]});}function getStockAndPrice(_0x31500b){const _0x30ac33=_0x18bf7e;try{const _0x10bb0a=_0x31500b['querySelector']('#aod-offer-heading')['textContent']['trim']()['replace']('\x0a','\x20')['replace'](/ +/g,'\x20'),_0x491185=parseInt(_0x31500b[_0x30ac33(0x98)](_0x30ac33(0x91))[_0x30ac33(0xae)][_0x30ac33(0xce)](/[^0-9]/g,''));let _0x10d2c8=0x1;const _0x188ec1=_0x31500b[_0x30ac33(0x98)](_0x30ac33(0xbd));if(_0x188ec1){const _0x15063d=_0x188ec1['querySelectorAll'](_0x30ac33(0x88));_0x10d2c8=parseInt(_0x15063d[_0x15063d[_0x30ac33(0xdb)]-0x1]['innerText'][_0x30ac33(0xce)](/[^0-9]/g,''));}return[_0x10bb0a,_0x491185,_0x10d2c8];}catch(_0x186cef){return console[_0x30ac33(0xb4)](_0x30ac33(0xe7),_0x186cef['message']),null;}}initializeScript();